---
layout:     post
title:      内存管理
subtitle:   内存管理
date:       2024-01-08
author:     soushuuu
header-img: img/the-first.png
catalog: false
tags:
    - linux
---


#### linux中物理内存的管理和分配

当需要使用主存时就需要向内存管理程序申请，申请的基本单位是内存页。
为了节约物理内存，在调用fork生成新进程时，新进程与原进程共享同一内存区。只有当其中一个进程进行写操作时，系统才会为其另外分配内存页面。这就是写时复制（copy on write）。

- linux内核对线性地址空间的使用分配
- 页面出错异常处理
    - 缺页异常
    - 写保护异常
- 写时复制（copy on write）机制
- 需求加载（load on demand）机制
    - 使用execve系统调用加载运行程序时，内核除了分配初始化空间，并为其环境参数和命令参数分配和映射一定数量的物理内存页面以外，实际上并没有给执行程序分配其他任何物理内存页面。因此一旦程序从设定的入口执行点开始运行就会立刻引起CPU产生一个缺页异常（执行指针所在的内存页面不存在）。
    这种仅在实际需要时才加载执行文件中页面的方法被称为需求加载（load on demand）技术或需求分页（demand-paging）技术。
- 功能描述
    - 管理主内存区中物理内存的占用和空闲情况
    - 在主内存区中申请一页空闲内存页，并返回物理内存页的起始地址
    - 释放指定地址处的一页物理内存
    - 复制物理内存页块
    - 将指定的物理页映射到指定的虚拟地址处
    - 页写保护处理
    - 缺页处理